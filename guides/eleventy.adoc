= Eleventy Bookshop
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:toc:
:toc-placement!:

toc::[]

== Eleventy Configuration

To use Eleventy with Jekyll, the primary dependency is the `@bookshop/eleventy-bookshop` npm package.

.*command*
```bash
npm i @bookshop/eleventy-bookshop
# or
yarn add @bookshop/eleventy-bookshop
```

Within your Eleventy config, specify the path to your bookshop project. 

TIP: If you specify multiple paths, the components will be merged.

TIP: Paths that don't exist will be skipped. If you specify local and production paths, the one that exists will be used.

.*.eleventy.js*
```javascript
const pluginBookshop = require("@bookshop/eleventy-bookshop");

module.exports = function (eleventyConfig) {
  // ...

	eleventyConfig.addPlugin(pluginBookshop({
		bookshopLocations: ["../component-library"]
	}));

  // ...
};
```

== Writing components

Let's look at an example `button.eleventy.liquid` file.
```
components/
└─ button/
   └─ button.eleventy.liquid
```
These files are namespaced for the static site generator when the filetype is ambiguous, which is why the file is `button.eleventy.liquid` and not `button.liquid`. Beyond the naming convention, these files are what you would expect when working with Liquid & Eleventy. Our `button.eleventy.liquid` file might look like:
```hbs
<a class="c-button" href="{{ link_url }}">{{ text }}</a>
```
This looks like a normal Eleventy include because it is. While bookshop provides developer tooling, the job of eleventy-bookshop is to tell Eleventy where to find component files. Loading and parsing these files goes through the normal Eleventy include flow.

== Using components

To use components directly in a template, use the `{% bookshop %}` tag like you would an include.

.*index.html*
```liquid
...
<div class="hero">
  {% bookshop "hero" title: title image: image %}
  {% bookshop "button" label: cta_text link_url: cta_url %}
</div>
...
```

Much like includes, a variable can be used to render the component:

.*index.html*
```liquid
---
components:
  - _bookshop_name: hero
    title: "Hello World"
    image: /image.png
  - _bookshop_name: button
    cta_text: "Get Started"
    link_url: /
---
<div class="hero">
  {% for props in components %}
    {% bookshop {{props._bookshop_name}} bind: props %}
  {% endfor %}
</div>
```

TIP: _Bookshop tags can use the `bind:` parameter, which works like the spread operator in Javascript. Here, all keys within the object `props` are unwrapped and passed to the component directly. If you're used to a framework like Svelte, this is the equivalent of `<Component {...props} />`_

== Using styles

To use Bookshop styles on your website, you can run the `bookshop-sass` command provided by `@bookshop/sass`.

.*command*
```bash
npm i @bookshop/sass
# or
yarn add @bookshop/sass

# then

npx @bookshop/sass -b ../component-library -o css/bookshop.css
```

From within your `package.json` file you can add the script as: 
```
"sass:build": "bookshop-sass -b ../component-library -o css/bookshop.css",
"sass:watch": "bookshop-sass -b ../component-library -o css/bookshop.css -w"
```

This compiles all styles from the Bookshop (including running any Postcss plugins you have configured in your working directory), and outputs a css file ready to be referenced on your website.

Reference `npx @bookshop/sass --help` to see the available options.
